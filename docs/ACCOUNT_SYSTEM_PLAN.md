# ê³„ì •/ë§¤ì¥ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œí¸ ê³„íš

> ì‘ì„±ì¼: 2025-12-28

---

## 1. ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  yamoo-payment (ë©”ì¸)                                        â”‚
â”‚                                                             â”‚
â”‚  â”œâ”€ ëœë”© í˜ì´ì§€ (/about)                                     â”‚
â”‚  â”œâ”€ ìš”ê¸ˆì œ (/pricing)                                        â”‚
â”‚  â”œâ”€ íšŒì›ê°€ì…/ë¡œê·¸ì¸ (/login)                                  â”‚
â”‚  â”‚   â”œâ”€ ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸                                    â”‚
â”‚  â”‚   â”œâ”€ Google                                              â”‚
â”‚  â”‚   â””â”€ ì¹´ì¹´ì˜¤ (ê³ ë ¤ì¤‘)                                        â”‚
â”‚  â”œâ”€ ë¬´ë£Œì²´í—˜ ì‹ ì²­ â†’ ê³„ì • + ë§¤ì¥ ìƒì„±                          â”‚
â”‚  â”œâ”€ ë§ˆì´í˜ì´ì§€ (/account)                                    â”‚
â”‚  â”‚   â”œâ”€ ê³„ì • ì •ë³´ ê´€ë¦¬                                      â”‚
â”‚  â”‚   â”œâ”€ ë§¤ì¥ ëª©ë¡ / ìˆ˜ì •, ì¶”ê°€, ì‚­ì œ                          â”‚
â”‚  â”‚   â””â”€ êµ¬ë… / ê²°ì œ ê´€ë¦¬                                     â”‚
â”‚  â””â”€ ê²°ì œ (/checkout)                                         â”‚
â”‚                                                             â”‚
â”‚  ğŸ”— Firebase (ê³„ì • + ë§¤ì¥ + êµ¬ë…)                            â”‚
â”‚  ğŸ”— Airtable (ë™ê¸°í™”)                                        â”‚
â”‚  ğŸ”— Postmark (ì´ë©”ì¼)                                        â”‚
â”‚  ğŸ”— Sentry (ì—ëŸ¬ ëª¨ë‹ˆí„°ë§)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ ì„¸ì…˜/í† í° ê³µìœ 
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í¬íƒˆ (ì„œë¹„ìŠ¤ ì‚¬ìš©)                                          â”‚
â”‚                                                             â”‚
â”‚  â”œâ”€ ë¡œê·¸ì¸ (yamoo-paymentì™€ ë™ì¼í•œ ì¸ì¦)                      â”‚
â”‚  â”œâ”€ ë§¤ì¥ ìƒì„¸ ì„¤ì • (FAQ, ë°ì´í„° ë“±)                       â”‚
â”‚  â”œâ”€ ëŒ€í™” ê´€ë¦¬                                                â”‚
â”‚  â””â”€ ì„œë¹„ìŠ¤ ì‚¬ìš©                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ê¸°ëŠ¥ë³„ ë‹´ë‹¹

| ê¸°ëŠ¥ | yamoo-payment | í¬íƒˆ |
|------|--------------|------|
| íšŒì›ê°€ì…/ë¡œê·¸ì¸ | âœ… | ë™ì¼ ì¸ì¦ ì‚¬ìš© |
| ê³„ì • ì •ë³´ ê´€ë¦¬ | âœ… | - |
| ë§¤ì¥ ìƒì„± (ê¸°ë³¸ ì •ë³´) | âœ… | - |
| ë§¤ì¥ ìƒì„¸ ì„¤ì • (FAQ ë“±) | - | âœ… |
| êµ¬ë…/ê²°ì œ ê´€ë¦¬ | âœ… | - |
| ì„œë¹„ìŠ¤ ì‚¬ìš© | - | âœ… |

---

## 3. ë¬´ë£Œì²´í—˜ ì‹ ì²­ í”Œë¡œìš°

```
/about ë¬´ë£Œì²´í—˜ í¼
â”œâ”€ ì´ë¦„
â”œâ”€ ì—°ë½ì²˜
â”œâ”€ ì´ë©”ì¼
â”œâ”€ ìƒí˜¸ëª…
â””â”€ ì—…ì¢…
        â†“
   [ì‹ ì²­í•˜ê¸°] í´ë¦­
        â†“
   /api/trial/signup í˜¸ì¶œ
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Firebase Auth ê³„ì • ìƒì„±             â”‚
â”‚  2. Firestore tenants ë¬¸ì„œ ìƒì„±         â”‚
â”‚  3. Airtable ë™ê¸°í™”                     â”‚
â”‚  4. Postmark ì´ë©”ì¼ ë°œì†¡                â”‚
â”‚     (ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ë§í¬ or ë§¤ì§ë§í¬)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
   ì„±ê³µ í™”ë©´ â†’ ì´ë©”ì¼ í™•ì¸ ì•ˆë‚´ or ë°”ë¡œ ë¡œê·¸ì¸
```

### ê¸°ì¡´ í”Œë¡œìš° (N8N)
```
í¼ ì œì¶œ â†’ N8N ì›¹í›… â†’ ì™¸ë¶€ ì²˜ë¦¬ â†’ ì´ë©”ì¼ ë°œì†¡
```

### ë³€ê²½ í›„ í”Œë¡œìš° (ìì²´ ì²˜ë¦¬)
```
í¼ ì œì¶œ â†’ yamoo-payment API â†’ ì§ì ‘ ì²˜ë¦¬ â†’ ì´ë©”ì¼ ë°œì†¡ (ì—ëŸ¬ ê´€ë¦¬ëŠ” sentry í†µí•´)
```

---

## 4. ì¸ì¦ í†µì¼

### ë¡œê·¸ì¸ UI (yamoo-payment & í¬íƒˆ ë™ì¼)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¡œê·¸ì¸                                  â”‚
â”‚                                         â”‚
â”‚  [Googleë¡œ ê³„ì†í•˜ê¸°]                     â”‚
â”‚  [ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°]                     â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€ ë˜ëŠ” â”€â”€â”€â”€                         â”‚
â”‚                                         â”‚
â”‚  ì´ë©”ì¼: [                  ]           â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸: [                ]           â”‚
â”‚  [ë¡œê·¸ì¸]                               â”‚
â”‚                                         â”‚
â”‚  ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë³€ê²½ì‚¬í•­
- ê°™ì€ Firebase Auth ì‚¬ìš©
- í¬íƒˆ OTP ë°©ì‹ â†’ ì´ë©”ì¼+ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½
- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¶”ê°€

---

## 5. ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ (Sentry)

```
Sentry ì—°ë™:
â”œâ”€ ì—ëŸ¬ ìë™ ìº¡ì²˜
â”œâ”€ ìŠ¬ë™ ì•Œë¦¼ ì—°ë™
â”œâ”€ ì»¨í…ìŠ¤íŠ¸ (email, brandName ë“±)
â””â”€ ì´ìŠˆ ê´€ë¦¬
```

### ì„¤ì • ë°©ë²•
```bash
npm install @sentry/nextjs
npx @sentry/wizard@latest -i nextjs
```

### ì‚¬ìš© ì˜ˆì‹œ
```typescript
import * as Sentry from '@sentry/nextjs';

Sentry.setContext('trial_signup', {
  email: data.email,
  brandName: data.brandName,
});

try {
  // ë¡œì§
} catch (error) {
  Sentry.captureException(error);
  throw error;
}
```

---

## 6. í•„ìš”í•œ ê°œë°œ ì‘ì—…

### yamoo-payment

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|----------|
| ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¶”ê°€ | Firebase Auth ì¹´ì¹´ì˜¤ ì—°ë™ | 2ì‹œê°„ |
| ë§¤ì¥ ìƒì„± API | POST /api/tenants | 2ì‹œê°„ |
| ë§¤ì¥ ì¶”ê°€ UI | ë§ˆì´í˜ì´ì§€ì— [+ ë§¤ì¥ ì¶”ê°€] | 2ì‹œê°„ |
| ë¬´ë£Œì²´í—˜ API | /api/trial/signup (ê³„ì •+ë§¤ì¥+Airtable+ì´ë©”ì¼) | 4ì‹œê°„ |
| ë¬´ë£Œì²´í—˜ í¼ ìˆ˜ì • | N8N â†’ ìì²´ API í˜¸ì¶œ | 1ì‹œê°„ |
| Airtable ì—°ë™ | lib/airtable.ts | 2ì‹œê°„ |
| Sentry ì„¤ì • | @sentry/nextjs ì„¤ì¹˜ + ì„¤ì • | 1ì‹œê°„ |
| í¬íƒˆ SSO | í† í°/ì„¸ì…˜ ê³µìœ  | 2ì‹œê°„ |

**ì†Œê³„: ì•½ 16ì‹œê°„ (2ì¼)**

### í¬íƒˆ

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|----------|
| ë¡œê·¸ì¸ ë°©ì‹ ë³€ê²½ | OTP â†’ ì´ë©”ì¼+ë¹„ë°€ë²ˆí˜¸+ì†Œì…œ | 3ì‹œê°„ |
| ê³„ì • ìƒì„± ë¡œì§ ì œê±° | yamoo-paymentì—ì„œë§Œ ìƒì„± | 1ì‹œê°„ |

**ì†Œê³„: ì•½ 4ì‹œê°„**

---

## 7. ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  yamoo-payment  â”‚
â”‚  (ê³„ì •+ë§¤ì¥ ìƒì„±) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Firebase     â”‚â”€â”€â”€â”€â–¶â”‚     Airtable    â”‚
â”‚  (Auth + Firestore)   â”‚  (branchNo ë“±)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      í¬íƒˆ       â”‚
â”‚  (ê°™ì€ Firebase  â”‚
â”‚   ë°ì´í„° ì‚¬ìš©)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ì´ ì˜ˆìƒ ì‘ì—…ëŸ‰

| êµ¬ë¶„ | ì‹œê°„ |
|------|------|
| yamoo-payment ê°œë°œ | 16ì‹œê°„ |
| í¬íƒˆ ìˆ˜ì • | 4ì‹œê°„ |
| í…ŒìŠ¤íŠ¸/ë²„ê·¸ ìˆ˜ì • | 4ì‹œê°„ |
| **í•©ê³„** | **ì•½ 24ì‹œê°„ (3ì¼)** |

---

## 9. ê°œë°œ ìš°ì„ ìˆœìœ„

### Phase 1: ê¸°ë³¸ êµ¬ì¡° (1ì¼)
- [ ] Sentry ì„¤ì •
- [ ] ë¬´ë£Œì²´í—˜ API (`/api/trial/signup`)
- [ ] Airtable ì—°ë™ (`lib/airtable.ts`)
- [ ] ë¬´ë£Œì²´í—˜ í¼ ìˆ˜ì • (N8N â†’ ìì²´ API)

### Phase 2: ì¸ì¦ í†µì¼ (1ì¼)
- [ ] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¶”ê°€
- [ ] í¬íƒˆ ë¡œê·¸ì¸ ë°©ì‹ ë³€ê²½
- [ ] SSO ì—°ë™

### Phase 3: ë§¤ì¥ ê´€ë¦¬ (1ì¼)
- [ ] ë§¤ì¥ ìƒì„± API (`/api/tenants`)
- [ ] ë§¤ì¥ ì¶”ê°€ UI
- [ ] í…ŒìŠ¤íŠ¸

---

## 10. íŒŒì¼ êµ¬ì¡° (ì˜ˆìƒ)

```
yamoo-payment/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ trial/
â”‚   â”‚   â”‚   â””â”€â”€ signup/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts    # ë¬´ë£Œì²´í—˜ ì‹ ì²­ API
â”‚   â”‚   â””â”€â”€ tenants/
â”‚   â”‚       â””â”€â”€ route.ts        # ë§¤ì¥ ìƒì„± API
â”‚   â””â”€â”€ account/
â”‚       â””â”€â”€ page.tsx            # ë§ˆì´í˜ì´ì§€ (ë§¤ì¥ ì¶”ê°€ UI)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ airtable.ts             # Airtable API í—¬í¼
â”‚   â”œâ”€â”€ ulid.ts                 # ULID ìƒì„±
â”‚   â””â”€â”€ trial-email.ts          # ì´ë©”ì¼ í…œí”Œë¦¿
â””â”€â”€ sentry.*.config.ts          # Sentry ì„¤ì •
```

---

## 11. ì°¸ê³ 

### ê¸°ì¡´ N8N ì›Œí¬í”Œë¡œìš° (trial-start)
- ìœ„ì¹˜: `ğŸ¥ trial-start.json`
(C:\Users\catki\Downloads)
- ê¸°ëŠ¥: ì›¹í›… â†’ ID ìƒì„± â†’ Airtable â†’ ë§¤ì§ë§í¬ â†’ ì´ë©”ì¼

### ê´€ë ¨ ë¬¸ì„œ
- [TECH_STACK.md](docs/TECH_STACK.md)
